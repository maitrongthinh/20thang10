<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>20/10 - H·ªôp Qu√† üéÅ</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* CSS ri√™ng cho trang index */
        body { background-color: var(--color-pink); }
        .gift-box-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
        }
        #gift-box-container {
            position: relative;
            margin-bottom: 20px;
            cursor: pointer;
            perspective: 800px; /* TƒÉng ph·ªëi c·∫£nh 3D */
            width: 180px; /* TƒÉng k√≠ch th∆∞·ªõc h·ªôp qu√† l√™n */
            height: 180px;
            animation: pulse-gift 2s infinite alternate;
        }
        
        /* Th√¢n H·ªôp Qu√† (Box Body) */
        #gift-box {
            width: 180px; 
            height: 120px;
            background: linear-gradient(to bottom, var(--box-color), #bfa7f2);
            border-radius: 10px;
            position: absolute;
            bottom: 0;
            left: 50%; 
            transform: translateX(-50%) translateZ(-30px);
            box-shadow: none;
            overflow: hidden; 
            transition: transform 1s var(--transition-timing);
        }

        /* RIBBON: Th√™m Ruy bƒÉng D·ªåC (Vertical Ribbon) - D√πng ::before, z-index 2 */
        #gift-box::before {
            content: "";
            position: absolute;
            width: 30px; /* Chi·ªÅu r·ªông ruy bƒÉng */
            height: 100%;
            background-color: var(--ribbon-color);
            left: 50%;
            transform: translateX(-50%);
            box-shadow: none; 
            z-index: 2; /* L·ªõp tr√™n */
        }

        /* ƒê√É LO·∫†I B·ªé Ruy bƒÉng NGANG (Horizontal Ribbon) */

        /* N·∫Øp H·ªôp Qu√† (Box Lid) */
        #gift-lid {
            width: 210px; 
            height: 40px;
            /* ƒê√É C·∫¨P NH·∫¨T: TƒÉng c∆∞·ªùng ƒë·ªô s√¢u gradient */
            background: linear-gradient(to top, #f0a7c4, var(--lid-color) 70%);
            position: absolute;
            top: 40px;
            left: 50%; 
            border-radius: 10px;
            box-shadow: none;
            transform-origin: center bottom; 
            transition: transform 1.5s var(--transition-timing);
            transform: translateX(-50%) rotateX(0deg) translateZ(0px); 
            z-index: 5;
            overflow: visible;
            border: 2px solid rgba(0, 0, 0, 0.05);
        }

        /* ƒê·ªô d√†y gi·∫£ l·∫≠p cho n·∫Øp h·ªôp */
        #gift-lid::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 5px; 
            background-color: #f0a7c4; 
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
            z-index: 1; 
        }


        /* N∆° Ruy BƒÉng (Bow) */
        .bow {
            position: absolute;
            top: -20px; /* N·∫±m ph√≠a tr√™n n·∫Øp h·ªôp */
            left: 50%;
            transform: translateX(-50%);
            z-index: 10; 
        }
        .bow-knot {
            width: 30px;
            height: 30px;
            background-color: var(--ribbon-color);
            border-radius: 50%;
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        .bow-loop {
            width: 20px;
            height: 40px;
            background-color: var(--ribbon-color);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: absolute;
            top: -10px;
            transition: transform 1.5s var(--transition-timing);
        }
        .bow-loop-left {
            transform: rotate(-30deg) translateX(-15px);
            left: -15px;
        }
        .bow-loop-right {
            transform: rotate(30deg) translateX(15px);
            right: -15px;
        }

        /* Icon b√™n trong h·ªôp qu√† */
        .gift-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-size: 5rem;
            color: var(--color-white);
            z-index: 3; /* Ph·∫£i n·∫±m tr√™n th√¢n h·ªôp nh∆∞ng d∆∞·ªõi n·∫Øp (khi ƒë√≥ng) */
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            transition: transform 0.5s ease 0.5s; 
        }

        .gift-box-wrapper.open .gift-icon {
            transform: translate(-50%, -50%) scale(1.2); 
        }

        @keyframes pulse-gift {
            from { transform: scale(1); }
            to { transform: scale(1.03); }
        }
    </style>
    <!-- G·∫Øn s·ª± ki·ªán click m·ªü h·ªôp qu√† -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const giftBoxContainer = document.getElementById('gift-box-container');
            const giftBoxWrapper = document.querySelector('.gift-box-wrapper');
            const mainContent = document.querySelector('.container.gift-box-wrapper');

            // X·ª≠ l√Ω click m·ªü h·ªôp qu√†
            giftBoxContainer.addEventListener('click', () => {
                if (giftBoxWrapper.classList.contains('open')) {
                    return; // ƒê√£ m·ªü r·ªìi, kh√¥ng l√†m g√¨ n·ªØa
                }

                // Ph√°t nh·∫°c n·ªÅn n·∫øu ch∆∞a ph√°t (y√™u c·∫ßu t∆∞∆°ng t√°c ng∆∞·ªùi d√πng)
                if (typeof playSoftPiano === 'function') {
                    playSoftPiano();
                }

                // M·ªü h·ªôp qu√†
                giftBoxWrapper.classList.add('open');
                
                // Hi·ªÉn th·ªã tin nh·∫Øn v√† n√∫t sau khi h·ªôp m·ªü xong
                setTimeout(() => {
                    const nextButton = document.getElementById('next-page-button');
                    if (nextButton) nextButton.classList.add('visible');
                    
                    // Th√™m class fade-out cho chuy·ªÉn c·∫£nh
                    mainContent.classList.remove('fade-in');
                    mainContent.classList.add('fade-out');

                    // Chuy·ªÉn trang sau 1.5s
                    setTimeout(() => {
                         if (typeof navigate === 'function') {
                            navigate('letter.html');
                        } else {
                            window.location.href = 'letter.html';
                        }
                    }, 1500);
                }, 1000); // 1 gi√¢y sau khi click b·∫Øt ƒë·∫ßu m·ªü n·∫Øp

                // V√¥ hi·ªáu h√≥a click sau khi m·ªü
                giftBoxContainer.style.pointerEvents = 'none';
            });
            
            // T·∫£i l·∫°i nh·∫°c n·ªÅn n·∫øu ƒë√£ b·∫≠t tr∆∞·ªõc ƒë√≥
            if (typeof initAudio === 'function') {
                initAudio();
            }
        });
    </script>
    <script src="main.js"></script>
</head>
<body id="index-page">
    <div class="container gift-box-wrapper fade-in">
        <h1 class="main-title">Ch√∫c m·ª´ng c√°c b·∫°n n·ªØ 9A!</h1>
        <p class="subtitle">·∫§n v√†o h·ªôp qu√† ƒë·ªÉ nh·∫≠n m√≥n qu√† !</p>
        
        <div id="gift-box-container">
            <div class="gift-box-wrapper">
                <div id="gift-box">
                    <!-- Ruy bƒÉng D·ªåC ƒë∆∞·ª£c t·∫°o b·∫±ng :before trong CSS -->
                    <span class="gift-icon">‚ú®</span>
                </div>
                <div id="gift-lid">
                    <!-- N∆° Ruy bƒÉng -->
                    <div class="bow">
                        <div class="bow-knot"></div>
                        <div class="bow-loop bow-loop-left"></div>
                        <div class="bow-loop bow-loop-right"></div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</body>
</html>
